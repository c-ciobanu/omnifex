enum MangaStatus {
  ENDED
  ONGOING
  CANCELLED
  ON_HIATUS
}

model Manga {
  aniListId      String?     @unique
  artists        String[]
  authors        String[]
  chapters       Int
  coverUrl       String
  description    String
  genres         String[]
  id             Int         @id @default(autoincrement())
  mangaBakaId    String?     @unique
  mangaDexId     String?     @unique
  mangaUpdatesId String      @unique
  malId          String?     @unique
  releaseYear    Int
  status         MangaStatus
  title          String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  userProgresses MangaProgress[]

  @@map("manga")
}

enum MangaProgressStatus {
  ABANDONED
  READ
  READING
  TO_READ
}

model MangaProgress {
  id              Int                 @id @default(autoincrement())
  status          MangaProgressStatus
  lastChapterRead Int?

  createdAt DateTime @default(now())

  user    User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId  String
  manga   Manga  @relation(fields: [mangaId], references: [id])
  mangaId Int

  @@unique([userId, mangaId])
  @@map("manga-progress")
}
